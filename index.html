<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!-- ç¦ç”¨æµè§ˆå™¨é»˜è®¤ç¼©æ”¾ï¼Œç¡®ä¿æ‰‹åŠ¿åªä½œç”¨äºå…ƒç´  -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AllenSu & Bird - Mini MotoPager</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&family=Zcool+KuaiLe&family=Nunito:wght@700;800&display=swap');

        :root {
            --body-bg: #EAE7DC;
            --machine-color: #F2EFE4;
            --machine-shadow: #d1cec5;
            --screen-bg: #222222;
            --screen-text: #FFB74D;
            --accent-orange: #E66A59;
            --accent-yellow: #FFD54F;
            --note-yellow: #fff7d1;
        }

        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0;
            height: 100vh;
            overflow: hidden;
            background-color: var(--body-bg);
            background-image: radial-gradient(#ccc 1.5px, transparent 1.5px);
            background-size: 24px 24px;
            font-family: 'Zcool KuaiLe', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            touch-action: none; /* ç¦æ­¢æ•´ä¸ªé¡µé¢çš„é»˜è®¤æ»šåŠ¨ */
        }

        #canvas {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        /* --- æ‰“å°æœºåŒºåŸŸ --- */
        .printer-zone {
            position: fixed;
            bottom: 10px;
            width: 100%;
            height: auto;
            display: flex;
            justify-content: center;
            z-index: 10000; 
            pointer-events: none;
        }

        /* === ç¼©æ”¾åŒ…è£…å™¨ === */
        .printer-scale-wrapper {
            transform: scale(0.5); 
            transform-origin: bottom center;
            position: relative;
            width: 340px; 
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .paper-feeder {
            position: absolute;
            bottom: 180px; 
            width: 260px;
            height: 300px;
            z-index: 9000;
            pointer-events: none; 
            display: flex;
            justify-content: center;
            align-items: flex-end;
        }

        .printer-body {
            position: relative;
            width: 340px;
            height: auto;
            background: var(--machine-color);
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.15),
                inset 0 2px 5px rgba(255,255,255,0.8),
                inset 0 -3px 5px rgba(0,0,0,0.05);
            border-radius: 30px;
            padding: 25px;
            z-index: 10001;
            pointer-events: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* å“ç‰ŒLogo */
        .brand-logo {
            font-family: 'Nunito', sans-serif;
            font-size: 10px;
            letter-spacing: 2px;
            color: #999;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .brand-icon { font-size: 14px; }

        /* å‡ºçº¸å£ */
        .black-slot {
            position: absolute;
            top: -12px; 
            width: 220px;
            height: 15px;
            background: #2a2a2a;
            border-radius: 8px;
            border-bottom: 2px solid #555;
            z-index: 10002;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* å±å¹• */
        .screen-bezel {
            width: 100%;
            background: #111;
            padding: 12px 15px;
            border-radius: 12px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.5), 0 2px 0 rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }

        .pixel-screen {
            width: 100%; height: 40px;
            background: transparent; color: var(--screen-text);
            font-family: 'VT323', monospace; font-size: 20px;
            border: none; outline: none; letter-spacing: 1px;
            text-shadow: 0 0 2px var(--screen-text);
        }
        .pixel-screen::placeholder { color: rgba(255, 183, 77, 0.3); }

        /* æ“æ§é¢æ¿ */
        .control-panel {
            width: 100%; display: flex;
            justify-content: space-between; align-items: center;
            padding: 0 5px;
        }

        .func-keys { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }

        .pixel-btn {
            width: 45px; height: 45px;
            border: none; border-radius: 12px;
            cursor: pointer; font-size: 20px;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.1s; position: relative;
            color: #555; font-family: 'Zcool KuaiLe';
            background: linear-gradient(145deg, #fefefe, #e6e6e6);
            box-shadow: 3px 3px 6px #ccc, -3px -3px 6px #fff;
        }
        .pixel-btn:active { transform: scale(0.95); box-shadow: inset 2px 2px 5px #ccc, inset -2px -2px 5px #fff; }
        .btn-label { position: absolute; bottom: -18px; font-size: 10px; color: #888; font-family: 'Nunito', sans-serif; font-weight: 700; white-space: nowrap; }

        /* æ‰“å°æŒ‰é’® */
        .print-group { display: flex; flex-direction: column; align-items: center; position: relative; }
        .big-print-btn {
            width: 70px; height: 70px;
            border-radius: 50%; border: none;
            background: var(--accent-orange); color: white;
            font-family: 'Nunito', sans-serif; font-weight: 800; font-size: 14px;
            cursor: pointer;
            box-shadow: 0 6px 0 #c0392b, 0 10px 15px rgba(0,0,0,0.2);
            display: flex; align-items: center; justify-content: center;
            text-transform: uppercase; letter-spacing: 1px;
        }
        .big-print-btn:active { transform: translateY(4px); box-shadow: 0 2px 0 #c0392b, 0 4px 5px rgba(0,0,0,0.2); }
        .power-light {
            width: 8px; height: 8px;
            background: #4CAF50; border-radius: 50%;
            box-shadow: 0 0 5px #4CAF50;
            margin-bottom: 8px; position: absolute; top: -15px;
        }

        /* è£…é¥°è´´çº¸ (æœºå™¨ä¸Šçš„) */
        .deco-sticker { position: absolute; font-size: 24px; pointer-events: none; opacity: 0.9; filter: drop-shadow(1px 1px 0 rgba(0,0,0,0.1)); }
        .deco-1 { top: 15px; left: 15px; transform: rotate(-15deg); }
        .deco-2 { top: 15px; right: 15px; transform: rotate(15deg); }


        /* === å¯äº¤äº’å¡ç‰‡ä¸è´´çº¸æ ·å¼ === */
        .pixel-card {
            position: absolute;
            transform-origin: center center;
            touch-action: none; /* å…³é”®ï¼šé˜²æ­¢ç§»åŠ¨ç«¯è§¦æ‘¸æ—¶æ»šåŠ¨å±å¹• */
            cursor: grab;
            pointer-events: auto;
        }

        .note-card {
            width: 200px; height: fit-content; min-height: 100px; max-height: 350px;
            overflow: hidden; background: var(--note-yellow); color: #333;
            padding: 20px 20px 30px 20px; box-shadow: 2px 5px 15px rgba(0,0,0,0.15);
            font-size: 17px; line-height: 1.6; text-align: justify;
            border-radius: 2px; font-family: 'Zcool KuaiLe', cursive;
        }
        
        .note-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 3h1v1H1V3zm2-2h1v1H3V1z' fill='%23000000' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E");
            pointer-events: none;
        }

        .polaroid-card {
            width: 220px; background: white; padding: 12px 12px 45px 12px;
            box-shadow: 5px 5px 20px rgba(0,0,0,0.15); transform: rotate(-2deg); border-radius: 3px;
        }
        .polaroid-card img { width: 100%; height: auto; display: block; background: #f0f0f0; pointer-events: none; filter: sepia(0.2) contrast(1.1); }
        .card-footer { position: absolute; bottom: 8px; right: 15px; font-size: 12px; color: #aaa; font-family: 'VT323', monospace; letter-spacing: 1px; }

        .printing-anim { transition: transform 2s cubic-bezier(0.25, 1, 0.5, 1); }
        
        /* äº¤äº’è´´çº¸æ ·å¼ */
        .sticker { 
            position: absolute; 
            font-size: 45px; 
            z-index: 5000; 
            filter: drop-shadow(3px 3px 0 rgba(0,0,0,0.1)); 
            cursor: grab; 
            touch-action: none; /* å…³é”®ï¼šé˜²æ­¢ç§»åŠ¨ç«¯è§¦æ‘¸æ—¶æ»šåŠ¨å±å¹• */
            transform-origin: center center;
        }
        
        .trash {
            position: absolute; top: 20px; right: 20px;
            width: 50px; height: 50px; border-radius: 50%;
            background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            display: flex; align-items: center; justify-content: center; font-size: 24px;
            z-index: 20000; transition: transform 0.2s;
        }
        .trash.active { background: #ffcdd2; transform: scale(1.1); color: #d32f2f; }
        #fileInput { display: none; }

    </style>
</head>
<body>

    <div class="trash" id="trashBin">ğŸ—‘ï¸</div>
    <div id="canvas"></div>

    <div class="printer-zone">
        <div class="printer-scale-wrapper">
            <div class="paper-feeder" id="feeder"></div>
            
            <div class="printer-body">
                <div class="deco-sticker deco-1">ğŸµ</div>
                <div class="deco-sticker deco-2">ğŸ¥</div>

                <div class="black-slot"></div>
                
                <div class="brand-logo">
                    <span class="brand-icon">âš¡</span> DIGITAL NOTE PRINTER
                </div>

                <div class="screen-bezel">
                    <input type="text" id="screen" class="pixel-screen" placeholder="TYPE MESSAGE..." autocomplete="off">
                </div>

                <div class="control-panel">
                    <div class="func-keys">
                        <button class="pixel-btn" onclick="randomQuote()" style="color: #5c6bc0;">
                            ğŸ“<span class="btn-label">QUOTE</span>
                        </button>
                        <button class="pixel-btn" onclick="document.getElementById('fileInput').click()" style="color: #ef5350;">
                            ğŸ–¼ï¸<span class="btn-label">PHOTO</span>
                        </button>
                        <button class="pixel-btn" onclick="addSticker()" style="color: #ffa726;">
                            ğŸ€<span class="btn-label">STICKER</span>
                        </button>
                    </div>

                    <div class="print-group">
                        <div class="power-light"></div>
                        <button class="big-print-btn" onclick="startPrint()">PRINT</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <input type="file" id="fileInput" accept="image/*" onchange="handleImage(this)">

    <script>
        const quotes = [
            "æ„Ÿè§‰ä½ çš„æ–‡æ¡ˆåœ¨æ•·è¡æˆ‘ ä½†åªæœ‰ä½ å¯éšæ—¶éšåœ°éšæ„æ•·è¡æˆ‘",
            "å½¢å®¹ä¸€ä¸‹è‡ªå·± â€¦â€¦æœ‰è‹é†’",
            "ä½ æ€ä¹ˆå¯èƒ½é€ƒç¦»æˆ‘çš„ç”Ÿæ´»",
            "å±±å‘¢ æœ‰æˆ‘äº†ä½ è¿˜çœ‹å±±",
            "å› ä¸ºåœ¨è’å²› æˆ‘å’Œå¼ è¿œè¿˜æœ‰å¯èƒ½äº§ç”Ÿçˆ±æƒ…çš„ç«èŠ±",
            "æˆ‘ä»¬ä¸æ˜¯ç»„åˆ æˆ‘ä»¬æ˜¯å®¶åº­ We are family",
            "å¾ˆå¤šäººè¯´è¿™æ˜¯çˆ±æƒ… ç®€ç›´ä¸€æ´¾èƒ¡è¨€ çˆ±æƒ… æ²¡æœ‰æˆ‘ä»¬ç¨³å®š",
            "ä»–åœ¨æˆ‘æœ€ä¸å¥½å’Œæœ€å¥½çš„æ—¶å€™éƒ½åœ¨æˆ‘èº«è¾¹",
            "æˆ‘åˆä¸æ˜¯gay ï¼Œæˆ‘åªæ˜¯æ¯”è¾ƒçˆ±è‹é†’è€Œå·²",
            "ä»–å°±æ˜¯æœ‰æ‰å",
            "Allen Su This is for you",
            "æ³•å›½äººéƒ½æ²¡æˆ‘ä¿©æµªæ¼«",
            "åªæœ‰éå¸¸å–„è‰¯çš„å­©å­æ‰ä¼šæ‹…å¿ƒæ··è›‹çš„å‘½è¿",
            "ä½†æˆ‘è§‰å¾—é‚£ä¸ªæ—¶å€™ æˆ‘çš„èº«è¾¹åº”è¯¥æœ‰å¼ è¿œ",
            "æœ€æ€•çš„ä¸‰ä»¶äº‹ èœ˜è›› å¡é‡Œæ²¡é’± è‹é†’æ‰¾ä¸åˆ°",
            "All I have is you",
            "ä¸èƒ½è¯´å½¢å½±ä¸ç¦» èµ·ç å°±æ˜¯å½¼æ­¤å……æ»¡äº†å¯¹æ–¹çš„ç”Ÿæ´»",
            "æ— è®ºä»•é€”å¤šé™© å¿ƒä¸­æ°¸è¿œæœ‰çˆ± æ— è®ºè°èµ°è°ç•™ Allenæ°¸è¿œéƒ½åœ¨",
            "æœ‰æ—¶å€™å‹æƒ…è¿™ä¸œè¥¿ æä¸å¥½æ¯”çˆ±æƒ…è¿˜è¦åˆ»éª¨é“­å¿ƒ",
            "è‡ªä»å¼ è¿œè¿™ä¸ªç­”æ¡ˆå‡ºç°ä¹‹å åé¢æ‰€æœ‰çš„ç­”æ¡ˆéƒ½æ˜¯å¼ è¿œ",
            "æ°¸è¿œå’Œè‡ªå·±è€å…¬åšå…„å¼Ÿ ä½ çœ‹å¤šå¥½",
            "é‡è§å¯¹çš„äººï¼Œä¸è¦æ€•æ‘Šç‰Œ",
            "è¿™å¦‚æœæˆ‘éƒ½èƒ½è·Ÿä½ æ‹‰åˆ°ä¸€å—çš„è¯ï¼Œæˆ‘å°±å‘å¾®åšè®¤è¿™ä¸ªç»„åˆäº†",
            "æˆ‘å®˜æ–¹è´´è„¸å¼€å¤§ï¼Œæˆ‘å°±æ˜¯â€œé†’è¿œforeverâ€è¡Œä¸è¡Œ",
            "æˆ‘ä»¬æœ€ç»ˆè®¾è®¡çš„å°±æ˜¯æˆ‘ä»¬ä¸‰ä¸ªåœ¨èˆå°ä¸Šç»è¿‡æ¿€çƒˆçš„æ“ä½œæˆ‘è·Ÿå¼ è¿œæœ€ç»ˆåœ¨ä¸€èµ·äº†",
            "æˆ‘ä¹Ÿå¾ˆå¼€å¿ƒï¼ŒAllenä»Šå¹´çœŸçš„ç»ˆäºæŠŠè‡ªå·±ç‰¹åˆ«ä¼˜ç§€çš„ä¸€é¢å±•ç°ç»™äº†å¤§å®¶ï¼Œç»ˆäºç­‰åˆ°è¿™ä¸€å¤©ã€‚",
            "To Bird, we are getting old.",
            "å¥½å¬å—ï¼ŸTake it.",
            "è¿œè¿œï¼Œçˆ±ä½ å“¦",
            "æƒ³å†æ¬¡ä¸ºæˆ‘æœ€å¥½çš„å…„å¼Ÿï¼Œé¼“æŒï¼Œwell doneï¼Œåšå¾—å¾ˆæ£’",
            "è€å‹ æŸå‹ soulmate å®¶äºº",
            "HERE COMES ALLENSU!!",
            "ä¸‰ä¸ªè¯å½¢å®¹è‡ªå·±:çœ¼ç›å°ã€å”±æ­Œå¥½ã€æœ‰è‹é†’",
            "Do you want me to kiss you?",
            "å€Ÿä»–é’± è·Ÿä»–ç›¸å¤„ å¬ä»–èŠå¤© è·Ÿä»–åƒé¥­ é™ªä»–åº¦è¿‡ä¸€äº›éœ€è¦é¼“åŠ±çš„å¯‚å¯çš„æ—¶å…‰ æ‰“å¼€å½¼æ­¤çš„å¿ƒæ‰‰å°±ä¼šæˆä¸ºå¥½æœ‹å‹â€¦",
            "è¿™äº›å¹´ä½ æœ‰åšå¾—ä»€ä¹ˆå¯¹çš„äº‹? -å’Œè‹é†’æˆä¸ºæœ€å¥½çš„å…„å¼Ÿ",
            "è¿™äº›å¹´æœ‰ä»€ä¹ˆåšçš„åæ‚”çš„äº‹? -å’Œè‹é†’æˆä¸ºæœ€å¥½çš„å…„å¼Ÿ",
            "æ’‘å…„é“å¼Ÿï¼Œæ°¸è¿œè·Ÿè‡ªå·±è€å…¬åšå…„å¼Ÿï¼Œä½ çœ‹å¤šå¥½",
            "äºŒåå¹´åï¼Œæˆ‘å’Œè‹é†’ååœ¨æ²™å‘ä¸Šï¼Œä¸€è¾¹çœ‹ç€ç”µè§†ï¼Œä¸€è¾¹å—‘ç€ç“œå­ã€‚",
            "DUDE, JUST GO FOR IT.",
            "ä½ ä»¬åµå¾—å†å‡¶å¼ è¿œç­‰ä¼šå„¿è¿˜ä¸æ˜¯è·Ÿæˆ‘å›ä¸€ä¸ªå°åŒº",
            "SING&LIVE HAPPILY",
            "è·Ÿè‹é†’å®…åœ¨ä¸€èµ·çš„æ—¶å€™éƒ½åšäº›ä»€ä¹ˆäº‹æ¶ˆé£? ä¸æˆ‘ä¿©ä¹‹å¤–çš„ä¸–ç•Œè¿æ¥",
            "å¼ è¿œ å°±åƒä»–çš„åå­—ï¼ŒBirdï¼Œåƒä¸€åªé¸Ÿ ä½†ä»–è¿Ÿæ—©ä¼šå˜æˆå‡¤å‡°",
            "æˆ‘åªæ˜¯æƒ³å¤šä¸€ç§éšæ—¶èƒ½è”ç³»åˆ°ä½ çš„æ–¹å¼...",
            "-æˆ‘ä»Šå¤©æ™šä¸Šç¡å“ªé‡Œ? -Of course my place -Why?           Because I love you.",
            "-æˆ‘ä¸çŸ¥é“è¯¥æ€ä¹ˆè¯„ä»·å¼ è¿œçš„ä¸€åŠå› ä¸ºè¯„ä»·è‡ªå·±æˆ‘ä¸å¤ªä¹ æƒ¯",
            "-è‹é†’å°±æ˜¯æˆ‘çš„ä¸€åŠ",
            "æˆ‘çš„ä¸–ç•Œï¼Œå¾ˆç®€å• , åªæœ‰ä¸‹åˆ... " ,
            "å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸‹åˆã€‚",
            "ä»Šå¹´å¦‚æœè¿˜æœ‰æ¼”å”±ä¼šï¼Œæˆ‘å°±æŠŠå®ƒå®Œå…¨æ’•å¼€     -å¦‚æœä½ æŠŠå®ƒå®Œå…¨æ’•å¼€ æˆ‘å°±æ‹¿çƒŸå¤´çƒ«ä½ ",
            "æˆ‘çš„æ„¿æœ›å°±æ˜¯å¸Œæœ›è¿œè¿œä»Šå¹´èƒ½ä¸Šæ˜¥æ™š",
            "ä½ ä¸ç¦»å¼€è‹é†’å¯èƒ½ä¼šç»“ä¸äº†å©šå“ -æˆ‘ä¸ºä»€ä¹ˆè¦ç¦»å¼€ä»–?",
            "è‹é†’æ‰“ç”µè¯è¯´ä»–åœ¨ åœ¨ç­‰ä½  ä¸€è§é¢æœ‰èŠä¸å®Œçš„è¯é¢˜~",
            "ä»¿ä½›çœ‹åˆ°äº†æˆ‘å’Œå¼ è¿œçš„æœªæ¥,ç™½è‰²åº”è¯¥æ˜¯æˆ‘ æ¯•ç«Ÿ æˆ‘æ¯”ä»–æ´»æ³¼äº›..",
            "æˆ‘çš„æ„æ€æ˜¯ä½ å¤šé»‘éƒ½ä¼šæœ‰äººçˆ±ä½ ",
            "å°±é‚£ä¸€ç§’ å°±é‚£ä¸€åˆ»çš„é»˜å¥‘è®©ä½ è§‰å¾—æˆ‘ä»¬å½¼æ­¤æ˜¯çœŸçš„å¾ˆåœ¨ä¹ä¹Ÿå¾ˆæƒ³å¿µ",
            "å°±é‚£ä¸€åˆ»æˆ‘è§‰å¾— ä»–å°±æ˜¯æˆ‘ä¸€è¾ˆå­çš„å…„å¼Ÿ",
            "å…¨ä¸–ç•Œåªæœ‰æˆ‘ä»¬...åœ¨è¿æ¥å°å®‡å®™",
            "é¸Ÿå’ŒçŒ´å¤©é•¿åœ°ä¹…",
            "æˆ‘è¦è‹é†’è¡Œäº†å§",
            "I'll be there for you.",
            "äººå®¶éƒ½è¯´æˆ‘ä¸€ä¸ªé‡‡è®¿è¦æ8æ¬¡è‹é†’ï¼Œæˆ‘è¯´æ€ä¹ˆäº†ï¼Œæˆ‘è¯´é‚£å°±æ˜¯ä»–åœ¨æˆ‘æœ€ä¸å¥½çš„æ—¶å€™å’Œæœ€å¥½çš„æ—¶å€™ï¼Œéƒ½åœ¨æˆ‘èº«è¾¹",
            "æ‰€ä»¥çœŸæ­£çš„å…„å¼Ÿå°±é‚£ä¹ˆä¸€ä¸¤ä¸ªï¼Œæ¯”å¦‚å½“äº²å¼Ÿå¼Ÿä¸€æ ·çš„å¼ è¿œ",
            "ä»–æ€ä¹ˆå¯èƒ½è½»è½»åœ°å»!ä»–å±…ç„¶æ•¢é‚£ä¹ˆé‡çš„äº²æˆ‘ï¼çœŸçš„æƒ³æŠŠä»–è¸¹æ­»!ä½†æ˜¯è¿™ä¹Ÿæ˜¯ä»–çˆ±æˆ‘çš„ä¸€ç§è¡¨è¾¾ï¼Œæˆ‘å§‘ä¸”æ¥å—",
            "I have nothing left to teach you.",
            "å£°éŸ³ä¼˜è´¨æƒ…æ„ŸåŠ å€å› ä¸ºè¿œè¿œçš„è¿™ä¸ªæ­Œå…¶å®åœ¨å‘å¸ƒä¹‹å‰æˆ‘å·²ç»å¬è¿‡æ— æ•°éçš„demoäº†",
            "åªè¦æœ‰æˆ‘åœ¨ ä»–èº«è¾¹çš„äºº æˆ‘æ¥æŠŠå…³",
            "ä¸ç®¡ä»–idolä¸idolï¼Œåœ¨æˆ‘é¢å‰ï¼Œä»–å°±æ˜¯å¼ è¿œ",
            "ä½ æœ‰ç™½å¤´å‘äº†ï¼Œæˆ‘ä¹Ÿæ˜¯",
            "æˆ‘æ˜¯å¦ˆå¦ˆçš„å„¿å­ï¼Œè‹é†’çš„å…„å¼Ÿ",
            "ä½ å°±æ˜¯å› ä¸ºå‰åå…«å¹´çš„ç§¯ç´¯å’Œå‹¤å¥‹æ‰æœ‰è¿™ä¸€æ¬¡ç»½æ”¾",
            "æˆ‘è·Ÿè‹é†’æ˜¯åˆ†ä¸å¼€çš„",
            "ç¯®çƒ å¼ è¿œ æ¢…è¥¿",
            "ä½ æ€ä¹ˆèƒ½é€ƒç¦»æˆ‘çš„ç”Ÿæ´»å‘¢ï¼ŸIâ€™m everywhereï¼",
            "å¦‚æœæ˜¯åˆ«äººçš„è¯æˆ‘ä¼šè€ƒè™‘ï¼Œä½†æ˜¯å¦‚æœç»™ä»–çš„è¯æˆ‘å¯ä»¥æ— æ¡ä»¶é€ç»™ä»–",
            "æŒºå¥½çš„ï¼Œæˆ‘ä»¬åæ¥å¾ˆå¤šå¹´çš„ç”Ÿæ´»å°±æ˜¯è¿™æ ·å­çš„å‘€ï¼Œå°±æ˜¯ä¸èƒ½è¯´å½¢å½±ä¸ç¦»ï¼Œä½†èµ·ç å°±æ˜¯å½¼æ­¤å……æ»¡äº†å¯¹æ–¹çš„ç”Ÿæ´»",
            "æˆ‘çš„è¿™ä½å…„å¼Ÿå‘¢ çœŸçš„éå¸¸çƒ­çˆ±èˆå° æ‰€ä»¥å‘¢ æˆ‘æƒ³å¸®ä»–å¤šç•™å‡ åœº è¿™ä½å…„å¼Ÿå°±æ˜¯è‹é†’ï¼",
            "æˆ‘ä»¬ä¸€èµ·å»äº†å†…è’™ç€æ—¥å‡ºï¼Œä¸€èµ·å»äº†é•°ä»“ï¼Œä¸€èµ·å»äº†äº‘å—ï¼Œè‹é†’è¿˜ç»™æˆ‘æ‹äº†ä¸€ç»„ç™¾å¹´å­¤å¯‚",
            "çƒ˜æ‰˜å°æ¸©æš–ï¼Œé¿å…æ–­èƒŒå±±",
            "æˆ‘çš„æ­Œï¼Œå”±çš„æœ€å¥½æ˜¯å¼ è¿œ",
            "åªæœ‰ä½ ä¼šå«æˆ‘â€œhey birdâ€",
            "æ‰€ä»¥å½“å¹´ä½ çš„æ¯”èµ›å¿ƒæ€ä¸ºä»€ä¹ˆæ²¡æœ‰è°ƒæ•´å¥½å‘¢          å¯èƒ½å› ä¸ºå¯¹æ‰‹æ˜¯ä½ å§",
            "æœˆäº®éƒ½å›°äº†",
            "é’±æ²¡æœ‰è‹é†’é‡è¦",
            "å‹‰å¼ºçš„æ…ˆæ‚²æ˜¯æ‡¦å¼± ä¸é…èµèµ è½¬æŠ˜çš„æ—¶æœŸç›¸é™ªä¼´ æˆ‘æ¥ç«™å²—",
            "å¸Œæœ›æˆ‘çš„å¥½å…„å¼ŸAllen Suçš„æ‰åï¼Œå°±ç®—æ˜¯åäºŒå¹´å‰çš„æ­Œï¼Œä¹Ÿè¦è¢«å¤§å®¶å¬è§ï¼",
            "æˆ‘å¾ˆçæƒœè¿™ä¹ä¸ªæœˆï¼Œå› ä¸ºæ¯å¹´æœ‰ä¸‰ä¸ªæœˆçš„æ—¶é—´ä»–æ˜¯æ¯”æˆ‘å°ä¸¤å²çš„",
            "æˆ‘ä¿©æš—è‡ªç«‹ä¸‹Flag å¦‚æœè°åˆçªç„¶çº¢äº†ç»å¯¹è¦ç»™æ‰€æœ‰äººçœ‹çœ‹ä»€ä¹ˆå«çœŸæ­£çš„å‹æƒ…",
            "Hope my friend Bird will soon be this red.",
            "è°¢è°¢ä½ åœ¨å®¶äººæ—…è¡Œæ¸¸è®°ä¸­æœ‰æˆ‘å‡ºç°ï¼Œè™½ç„¶æ˜¯ä»¥å¦ä¸€ç§æ–¹å¼å‘ˆç°...ä½ è¯´ä½ ä¹°æˆ¿å­é‚£å¤©ä¼šç»™æˆ‘ç•™ä¸€ä¸ªæˆ¿é—´ï¼Œæˆ‘æƒ³è¯´æˆ‘ä¹Ÿä¸€æ ·",
            "æˆ‘ä»¬çš„æ•…äº‹å¯ä»¥å†™ä¸€æœ¬ä¹¦çš„ï¼Œè¿™ä¸ªä¹¦åä¸å¦‚å«åšã€Šme & youã€‹",
            "å’Œæˆ‘ä¿æŒè·ç¦»ï¼Œå¥½å¥½å½“ä¸ªå¶åƒ",
            "-é‚£ä¸ªä»€ä¹ˆï¼Œæˆ‘å°±æŠŠè‡ªå·±äº¤ç»™ä½ äº†...   å¥½å§..",
            "è‹é†’ï¼è¯´äº†å¤šå°‘éäº†ï¼Œå®¶é‡Œèƒ½ä¸èƒ½å‡†å¤‡ç‚¹æ°´ï¼çº¯å‡€æ°´ï¼",
            "æˆ‘å»å‚åŠ ã€Šåˆ›é€ è¥2019ã€‹ï¼Œè‹é†’æ¯å‘¨å‘å¾®åšä¸ºæˆ‘æ‹‰ç¥¨",
            "çœ‹çš„å‡ºæ¥å—ï¼Ÿæˆ‘ä¿©æ˜¯ä¸€å¯¹",
            "è¿™é¦–æ­Œå‘¢ï¼Œæ˜¯æˆ‘åœ¨åˆ›é€ è¥çš„æ—¶å€™åˆ›ä½œçš„ï¼Œä¹Ÿç‰¹åˆ«æ„Ÿè°¢æˆ‘çš„å¥½å…„å¼Ÿè‹é†’ï¼Œé™ªæˆ‘ä¸€èµ·å†™äº†è¿™é¦–æ­Œ",
            "æˆ‘æœ€å–œæ¬¢è‹é†’å¯ä»¥ä¹ˆ?",
            "æˆ‘ä»å‡ºé“åˆ°ç°åœ¨ï¼Œä¸è¯´å¤§èµ·å¤§è½ï¼Œä¹Ÿæ˜¯èµ·èµ·è½è½ï¼Œæœ€åé™ªä¼´åœ¨æˆ‘èº«è¾¹çš„è¿˜æ˜¯é‚£äº›æœ‹å‹ï¼Œè‹é†’æ˜¯æœ€å¥½çš„ä¸€ä¸ª",
            "Oliviaï¼Œä½ è¯´ä»–æ€ä¹ˆè¿˜ä¸å›æ¥",
            "æˆ‘å½“æ—¶é‚£äº›æ­Œæ²¡æœ‰äººæ³¨æ„çš„ï¼Œåªæœ‰ä»–ï¼Œåªæœ‰ä»–çŸ¥é“æˆ‘åœ¨å¹²ä»€ä¹ˆä»–è¿˜ä¸ºæˆ‘é¸£è¿‡ä¸å¹³ï¼Œä»–ä¹Ÿè§‰å¾—å…¶å®æˆ‘çš„ä¸œè¥¿åº”è¯¥å€¼å¾—è¢«æ›´å¤šäººå¬åˆ°",
            "è®©å¼ è¿œæ„Ÿè§‰åˆ°OKå°±è¡Œäº†",
            "æˆ‘å¾ˆå¹¸è¿ï¼Œä¹Ÿå¾ˆéª„å‚²ï¼Œæˆ‘æœ‰ä¸€ä¸ªè¿™ä¹ˆä¼˜ç§€çš„å…„å¼Ÿ",
            "æˆ‘ä¸çˆ±å¬åˆ«äººè¯´ä»–çš„æ­Œä¸çº¢å°±ä¸å¥½...",
            "æˆ‘ç›¸ä¿¡ä»–çš„æ‰åæ€»æœ‰ä¸€å¤©ä¼šè¢«çœ‹åˆ°â€¦åæ­£æˆ‘ä¸ç®¡ï¼Œæˆ‘å…„å¼Ÿå¾ˆèµ...",
            "ä»–æ˜¯æˆ‘æœ€å¥½çš„æœ‹å‹ï¼Œä»–æ˜¯æˆ‘æœ€å¥½çš„å…„å¼Ÿï¼Œä»–æ˜¯æˆ‘æœ€å¥½çš„çˆ±äººï¼Œæœ€å¥½æœ€çˆ±çš„é‚£ä¸ªäºº",
            "ä¸€ä¼šå„¿è¦å»é™ªé™ªAllen Suæ‰“ç¯®çƒï¼Œä»–ç°åœ¨éœ€è¦äººé™ªå˜›å¯¹ä¸å¯¹",
            "æˆ‘è°¨ä»£è¡¨å›½å†…è¯´å”±æ­Œæ‰‹ï¼Œè€OGï¼Œè‹é†’åŒå­¦å› ä¸ºä½ å°±ä»£è¡¨æˆ‘äº†ï¼Œæˆ‘å°±ä¸é‡å¤è¯´äº†",
            "ä»–æ˜¯å°‘æœ‰çš„å°±æ˜¯é‚£ç§è¯å¤šä½ åˆä¸è§‰å¾—ä»–çƒ¦çš„é‚£ç§",
            "æˆ‘æ‰“ç®—ç­‰å“ªä¸€å¤©ï¼Œæˆ‘å½»åº•é€€å‡ºè¿™ä¸ªåœˆå­äº†ï¼Œæˆ‘ä¼šèººåœ¨ä¸€ä¸ªé•¿æ¤…ä¸Šï¼Œåœ¨æµ·è¾¹ï¼Œå¹ç€æµ·é£...ä½†æˆ‘è§‰å¾—é‚£ä¸ªæ—¶å€™ï¼Œèº«è¾¹åº”è¯¥æœ‰å¼ è¿œ",
            "ONLY ONE, è¿™ä¸€ä½äº†ä¸å¾—ï¼Œæ˜¯æˆ‘åœ¨è¿™ä¸ªè¡Œä¸šå†…æœ€å¥½çš„å…„å¼Ÿæ²¡æœ‰ä¹‹ä¸€"
        ];

        const stickers = ["ğŸµ","ğŸ¥","ğŸ€","ğŸ¤","ğŸ’–","âœ¨","ğŸ€","ğŸ’Œ","ğŸ©¹","ğŸ­","ğŸ¼","ğŸ“","ğŸ¾","ğŸ’","ğŸ’«","ğŸµ","ğŸ”¥","ğŸ’¯","ğŸ“·","ğŸ¯"];
        
        const noteColors = ['#fff7d1', '#ffcdd2', '#e1bee7', '#bbdefb', '#c8e6c9', '#ffe0b2'];

        const screen = document.getElementById('screen');
        const feeder = document.getElementById('feeder');
        const canvas = document.getElementById('canvas');
        const trashBin = document.getElementById('trashBin');
        
        let zIndexGlobal = 100; 

        function randomQuote() {
            screen.value = quotes[Math.floor(Math.random() * quotes.length)];
        }

        function startPrint() {
            const text = screen.value.trim();
            if(!text) return;
            spawnCard(text, 'note');
            screen.value = "";
            screen.blur();
        }

        function handleImage(input) {
            if(input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => spawnCard(e.target.result, 'photo');
                reader.readAsDataURL(input.files[0]);
            }
            input.value = "";
        }

        function addSticker() {
            const s = document.createElement('div');
            s.className = 'sticker';
            s.textContent = stickers[Math.floor(Math.random() * stickers.length)];
            // è´´çº¸åˆå§‹ä½ç½®å±…ä¸­
            s.style.left = (window.innerWidth / 2 - 20) + 'px';
            s.style.top = (window.innerHeight / 2 - 150) + 'px';
            
            s.dataset.angle = Math.random() * 40 - 20;
            s.dataset.scale = 1.0; // è´´çº¸åˆå§‹å¤§å°ä¸º 1.0
            s.dataset.x = 0;
            s.dataset.y = 0;
            
            updateTransform(s);
            document.body.appendChild(s); 
            makeInteractable(s);
        }

        function spawnCard(content, type) {
            const card = document.createElement('div');
            card.className = 'pixel-card ' + (type === 'note' ? 'note-card' : 'polaroid-card');
            
            if (type === 'note') {
                const randomColor = noteColors[Math.floor(Math.random() * noteColors.length)];
                card.style.backgroundColor = randomColor;
                card.innerHTML = `${content}<div class="card-footer">#AllenSu&Bird</div>`;
            } else {
                card.innerHTML = `<img src="${content}"><div class="card-footer">My Best Bro</div>`;
            }
            
            feeder.appendChild(card);
            
            const angle = Math.random() * 4 - 2; 
            card.dataset.angle = angle;
            // åˆšæ‰“å°å‡ºæ¥æ—¶æ¯”è¾ƒå°
            card.dataset.scale = 0.5; 
            card.dataset.x = 0; 
            card.dataset.y = 0;

            // åŠ¨ç”»ä½ç§»
            card.style.transform = `translate(0, 150px) rotate(${angle}deg)`; 
            card.offsetHeight; 

            requestAnimationFrame(() => {
                card.classList.add('printing-anim');
                card.style.transform = `translate(0, -80px) rotate(${angle}deg)`;
            });

            makeInteractable(card);
        }

        function updateTransform(el) {
            // å¦‚æœè¿˜åœ¨å‡ºçº¸å£é‡Œï¼Œä¸åº”ç”¨JSæ§åˆ¶çš„transform
            if (el.parentElement === feeder) return;
            
            const x = parseFloat(el.dataset.x) || 0;
            const y = parseFloat(el.dataset.y) || 0;
            const angle = parseFloat(el.dataset.angle) || 0;
            const scale = parseFloat(el.dataset.scale) || 1;
            // ä½¿ç”¨ translate3d ç¡®ä¿ç¡¬ä»¶åŠ é€Ÿï¼Œæµç•…åº¦æ›´é«˜
            el.style.transform = `translate3d(${x}px, ${y}px, 0) rotate(${angle}deg) scale(${scale})`;
        }

        // === æ ¸å¿ƒäº¤äº’é€»è¾‘ï¼šæ”¯æŒå•æŒ‡æ‹–æ‹½ï¼ŒåŒæŒ‡ç¼©æ”¾/æ—‹è½¬ ===
        function makeInteractable(el) {
            let isDragging = false;
            let isGesturing = false; 
            
            // æ‹–æ‹½èµ·å§‹åæ ‡
            let startX = 0, startY = 0; 
            let initialX = 0, initialY = 0;

            // æ‰‹åŠ¿èµ·å§‹çŠ¶æ€
            let startDist = 0, startAngle = 0; 
            let initialScale = 1, initialRotation = 0;

            function handleStart(e) {
                // é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼ˆé˜²æ­¢å±å¹•æ»šåŠ¨ï¼‰ï¼Œé™¤éæˆ‘ä»¬æƒ³å…è®¸ç‚¹å‡»æŸäº›ä¸œè¥¿
                // ä½†å¯¹äºå¡ç‰‡æ“ä½œï¼Œé€šå¸¸éœ€è¦é˜»æ­¢é»˜è®¤
                if(e.type === 'touchstart') {
                    // è¿™é‡Œä¸å®Œå…¨ preventDefaultï¼Œå¦åˆ™ click äº‹ä»¶å¯èƒ½ä¸è§¦å‘ï¼ˆå¦‚ trashBin æ£€æµ‹ï¼‰ï¼Œ
                    // ä½†æˆ‘ä»¬åœ¨ move æ—¶ä¼š preventDefault
                } else {
                    e.preventDefault();
                }

                // å½“ä¾¿ç­¾ä»æ‰“å°æœºè¢«æ‹–å‡ºæ¥æ—¶
                if (el.parentElement === feeder) {
                    const rect = el.getBoundingClientRect();
                    el.classList.remove('printing-anim');
                    el.style.transition = 'none';
                    canvas.appendChild(el);
                    
                    // è½¬æ¢ä¸ºç»å¯¹å®šä½ï¼Œç›¸å¯¹äº body/canvas
                    el.style.left = '0px'; 
                    el.style.top = '0px';
                    el.dataset.x = rect.left;
                    el.dataset.y = rect.top;
                    
                    updateTransform(el);
                }

                zIndexGlobal++;
                el.style.zIndex = zIndexGlobal;

                if (e.touches && e.touches.length === 2) {
                    // === åŒæŒ‡æ‰‹åŠ¿å¼€å§‹ ===
                    isGesturing = true; 
                    isDragging = false;
                    
                    startDist = getDistance(e.touches[0], e.touches[1]);
                    startAngle = getAngle(e.touches[0], e.touches[1]);
                    
                    initialScale = parseFloat(el.dataset.scale) || 1;
                    initialRotation = parseFloat(el.dataset.angle) || 0;
                } else {
                    // === å•æŒ‡æ‹–æ‹½å¼€å§‹ ===
                    isDragging = true;
                    const point = e.touches ? e.touches[0] : e;
                    startX = point.clientX; 
                    startY = point.clientY;
                    
                    initialX = parseFloat(el.dataset.x) || 0;
                    initialY = parseFloat(el.dataset.y) || 0;
                }

                if (e.type === 'touchstart') {
                    document.addEventListener('touchmove', handleMove, {passive: false}); // passive: false å…è®¸ preventDefault
                    document.addEventListener('touchend', handleEnd);
                } else {
                    document.addEventListener('mousemove', handleMove);
                    document.addEventListener('mouseup', handleEnd);
                }
            }

            function handleMove(e) {
                // å…³é”®ï¼šé˜»æ­¢æµè§ˆå™¨æ»šåŠ¨ï¼Œè®©JSå®Œå…¨æ¥ç®¡è§¦æ‘¸
                if(e.cancelable) e.preventDefault(); 

                // å¦‚æœè§¦æ‘¸ç‚¹æ•°é‡å˜åŒ–ï¼Œé‡ç½®çŠ¶æ€ï¼ˆä¾‹å¦‚ä»1æŒ‡å˜2æŒ‡ï¼Œæˆ–è€…2æŒ‡å˜1æŒ‡ï¼‰
                if (e.touches && e.touches.length === 2 && !isGesturing) {
                     // åŠ¨æ€åˆ‡æ¢åˆ°æ‰‹åŠ¿æ¨¡å¼
                    isGesturing = true; isDragging = false;
                    startDist = getDistance(e.touches[0], e.touches[1]);
                    startAngle = getAngle(e.touches[0], e.touches[1]);
                    initialScale = parseFloat(el.dataset.scale) || 1;
                    initialRotation = parseFloat(el.dataset.angle) || 0;
                    return;
                }

                if (isGesturing && e.touches && e.touches.length === 2) {
                    // === å¤„ç†åŒæŒ‡ç¼©æ”¾å’Œæ—‹è½¬ ===
                    const currDist = getDistance(e.touches[0], e.touches[1]);
                    const currAngle = getAngle(e.touches[0], e.touches[1]);
                    
                    if (startDist > 0) {
                        let scale = initialScale * (currDist / startDist);
                        // é™åˆ¶ç¼©æ”¾èŒƒå›´ï¼Œé˜²æ­¢å¤ªå°çœ‹ä¸è§æˆ–å¤ªå¤§å æ»¡å±
                        scale = Math.max(0.3, Math.min(scale, 4)); 
                        el.dataset.scale = scale;
                    }
                    
                    // è®¡ç®—æ—‹è½¬è§’åº¦å·®
                    const angleDiff = currAngle - startAngle;
                    el.dataset.angle = initialRotation + angleDiff;
                    
                    updateTransform(el);
                } else if (isDragging) {
                    // === å¤„ç†å•æŒ‡ç§»åŠ¨ ===
                    const point = e.touches ? e.touches[0] : e;
                    const dx = point.clientX - startX;
                    const dy = point.clientY - startY;
                    
                    el.dataset.x = initialX + dx;
                    el.dataset.y = initialY + dy;
                    
                    updateTransform(el);
                    checkTrash(el);
                }
            }

            function handleEnd(e) {
                // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ‰‹æŒ‡åœ¨å±å¹•ä¸Š
                if (e.touches && e.touches.length > 0) {
                    // å¦‚æœè¿˜æœ‰æ‰‹æŒ‡ï¼ˆæ¯”å¦‚åŒæŒ‡æ¾å¼€äº†ä¸€åªï¼‰ï¼Œå¯ä»¥å°è¯•åˆ‡æ¢å›å•æŒ‡æ‹–æ‹½é€»è¾‘
                    // è¿™é‡Œç®€å•å¤„ç†ï¼šå¦‚æœè¿˜æœ‰æ‰‹æŒ‡ï¼Œé‡ç½®æ‹–æ‹½èµ·ç‚¹ï¼Œé¿å…è·³å˜
                    if (e.touches.length === 1) {
                        isGesturing = false;
                        isDragging = true;
                        const point = e.touches[0];
                        startX = point.clientX;
                        startY = point.clientY;
                        initialX = parseFloat(el.dataset.x) || 0;
                        initialY = parseFloat(el.dataset.y) || 0;
                    }
                    return;
                }
                
                isDragging = false; 
                isGesturing = false;
                
                document.removeEventListener('mousemove', handleMove);
                document.removeEventListener('mouseup', handleEnd);
                document.removeEventListener('touchmove', handleMove);
                document.removeEventListener('touchend', handleEnd);
                
                if(checkTrash(el, true)) el.remove();
            }

            el.addEventListener('mousedown', handleStart);
            // passive: false å¯¹äº touchstart ä¹Ÿå¾ˆé‡è¦
            el.addEventListener('touchstart', handleStart, {passive: false});
        }

        function getDistance(t1, t2) { return Math.hypot(t1.pageX - t2.pageX, t1.pageY - t2.pageY); }
        // è®¡ç®—è§’åº¦ (Deg)
        function getAngle(t1, t2) { return Math.atan2(t2.pageY - t1.pageY, t2.pageX - t1.pageX) * 180 / Math.PI; }

        function checkTrash(el, doDelete = false) {
            const r1 = el.getBoundingClientRect();
            const r2 = trashBin.getBoundingClientRect();
            const overlap = !(r1.right < r2.left || r1.left > r2.right || r1.bottom < r2.top || r1.top > r2.bottom);
            if(overlap) {
                trashBin.classList.add('active');
                return doDelete;
            } else {
                trashBin.classList.remove('active');
                return false;
            }
        }
    </script>
</body>
</html>
